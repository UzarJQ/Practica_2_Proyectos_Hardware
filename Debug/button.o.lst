   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"button.c"
  21              	.Ltext0:
  22              		.file 1 "../button.c"
 2263              		.align	2
 2266              	led8_count:
 2267 0000 00000000 		.space	4
 2268              		.comm	button_id,4,4
 2269              		.comm	last_timer_value,4,4
 2270              		.global	button_state
 2273              	button_state:
 2274 0004 00       		.space	1
 2275              		.global	button_flag
 2276 0005 000000   		.align	2
 2279              	button_flag:
 2280 0008 00000000 		.space	4
 2281              		.text
 2282              		.align	2
 2283              		.global	Eint4567_ISR
 2285              	Eint4567_ISR:
 2286              	.LFB0:
   1:../button.c   **** /*--- Archivo : button.c ---*/
   2:../button.c   **** #include "8led.h"
   3:../button.c   **** #include "led.h"
   4:../button.c   **** #include "44blib.h"
   5:../button.c   **** #include "44b.h"
   6:../button.c   **** #include "def.h"
   7:../button.c   **** #include "button.h"
   8:../button.c   **** #include "cola.h"
   9:../button.c   **** 
  10:../button.c   **** /*--- Variables globales ---*/
  11:../button.c   **** volatile int led8_count = 0;
  12:../button.c   **** 
  13:../button.c   **** volatile int button_id;
  14:../button.c   **** 
  15:../button.c   **** volatile unsigned int last_timer_value;
  16:../button.c   **** volatile ButtonState button_state = WAITING;
  17:../button.c   **** volatile int button_flag = 0;
  18:../button.c   **** 
  19:../button.c   **** /* Declaración de función para ISR de Eint4567 */
  20:../button.c   **** void Eint4567_ISR(void) __attribute__((interrupt("IRQ")));
  21:../button.c   **** 
  22:../button.c   **** /* Código de funciones */
  23:../button.c   **** void Eint4567_ISR(void)
  24:../button.c   **** {
 2287              		.loc 1 24 0
 2288              		.cfi_startproc
 2289              		@ Interrupt Service Routine.
 2290              		@ args = 0, pretend = 0, frame = 0
 2291              		@ frame_needed = 1, uses_anonymous_args = 0
 2292 0000 04C02DE5 		str	ip, [sp, #-4]!
 2293 0004 0DC0A0E1 		mov	ip, sp
 2294              	.LCFI0:
 2295              		.cfi_def_cfa_register 12
 2296 0008 3FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, r4, r5, fp, ip, lr, pc}
 2297 000c 04B04CE2 		sub	fp, ip, #4
 2298              		.cfi_offset 14, -8
 2299              		.cfi_offset 13, -12
 2300              		.cfi_offset 11, -16
 2301              		.cfi_offset 5, -20
 2302              		.cfi_offset 4, -24
 2303              		.cfi_offset 3, -28
 2304              		.cfi_offset 2, -32
 2305              		.cfi_offset 1, -36
 2306              		.cfi_offset 0, -40
 2307              	.LCFI1:
 2308              		.cfi_def_cfa 11, 4
  25:../button.c   ****   rINTMSK |= BIT_EINT4567; // Deshabilitar interrupciones de EINT4567
 2309              		.loc 1 25 0
 2310 0010 C0309FE5 		ldr	r3, .L6
 2311 0014 BC209FE5 		ldr	r2, .L6
 2312 0018 002092E5 		ldr	r2, [r2, #0]
 2313 001c 022682E3 		orr	r2, r2, #2097152
 2314 0020 002083E5 		str	r2, [r3, #0]
  26:../button.c   **** 
  27:../button.c   ****   switch (rEXTINTPND)
 2315              		.loc 1 27 0
 2316 0024 B0309FE5 		ldr	r3, .L6+4
 2317 0028 003093E5 		ldr	r3, [r3, #0]
 2318 002c 040053E3 		cmp	r3, #4
 2319 0030 0200000A 		beq	.L3
 2320 0034 080053E3 		cmp	r3, #8
 2321 0038 0D00000A 		beq	.L4
 2322              	.LBB2:
  28:../button.c   ****   {
  29:../button.c   ****   case 4:
  30:../button.c   ****     button_id = 6;
  31:../button.c   ****     push_debug(PRESSED_IRQ, button_id, timer1_leer());
  32:../button.c   ****     break;
  33:../button.c   ****   case 8:
  34:../button.c   ****     button_id = 7;
  35:../button.c   ****     push_debug(PRESSED_IRQ, button_id, timer1_leer());
  36:../button.c   ****     break;
  37:../button.c   ****   default:
  38:../button.c   ****     break;
 2323              		.loc 1 38 0
 2324 003c 190000EA 		b	.L5
 2325              	.L3:
  30:../button.c   ****     button_id = 6;
 2326              		.loc 1 30 0
 2327 0040 98309FE5 		ldr	r3, .L6+8
 2328 0044 0620A0E3 		mov	r2, #6
 2329 0048 002083E5 		str	r2, [r3, #0]
  31:../button.c   ****     push_debug(PRESSED_IRQ, button_id, timer1_leer());
 2330              		.loc 1 31 0
 2331 004c 8C309FE5 		ldr	r3, .L6+8
 2332 0050 003093E5 		ldr	r3, [r3, #0]
 2333 0054 0340A0E1 		mov	r4, r3
 2334 0058 FEFFFFEB 		bl	timer1_leer
 2335 005c 0030A0E1 		mov	r3, r0
 2336 0060 0100A0E3 		mov	r0, #1
 2337 0064 0410A0E1 		mov	r1, r4
 2338 0068 0320A0E1 		mov	r2, r3
 2339 006c FEFFFFEB 		bl	push_debug
  32:../button.c   ****     break;
 2340              		.loc 1 32 0
 2341 0070 0C0000EA 		b	.L5
 2342              	.L4:
  34:../button.c   ****     button_id = 7;
 2343              		.loc 1 34 0
 2344 0074 64309FE5 		ldr	r3, .L6+8
 2345 0078 0720A0E3 		mov	r2, #7
 2346 007c 002083E5 		str	r2, [r3, #0]
  35:../button.c   ****     push_debug(PRESSED_IRQ, button_id, timer1_leer());
 2347              		.loc 1 35 0
 2348 0080 58309FE5 		ldr	r3, .L6+8
 2349 0084 003093E5 		ldr	r3, [r3, #0]
 2350 0088 0340A0E1 		mov	r4, r3
 2351 008c FEFFFFEB 		bl	timer1_leer
 2352 0090 0030A0E1 		mov	r3, r0
 2353 0094 0100A0E3 		mov	r0, #1
 2354 0098 0410A0E1 		mov	r1, r4
 2355 009c 0320A0E1 		mov	r2, r3
 2356 00a0 FEFFFFEB 		bl	push_debug
  36:../button.c   ****     break;
 2357              		.loc 1 36 0
 2358 00a4 0000A0E1 		mov	r0, r0	@ nop
 2359              	.L5:
 2360              	.LBE2:
  39:../button.c   ****   }
  40:../button.c   **** 
  41:../button.c   ****   button_flag = 1;
 2361              		.loc 1 41 0
 2362 00a8 34309FE5 		ldr	r3, .L6+12
 2363 00ac 0120A0E3 		mov	r2, #1
 2364 00b0 002083E5 		str	r2, [r3, #0]
  42:../button.c   ****   rI_ISPC |= BIT_EINT4567;
 2365              		.loc 1 42 0
 2366 00b4 2C309FE5 		ldr	r3, .L6+16
 2367 00b8 28209FE5 		ldr	r2, .L6+16
 2368 00bc 002092E5 		ldr	r2, [r2, #0]
 2369 00c0 022682E3 		orr	r2, r2, #2097152
 2370 00c4 002083E5 		str	r2, [r3, #0]
  43:../button.c   **** }
 2371              		.loc 1 43 0
 2372 00c8 24D04BE2 		sub	sp, fp, #36
 2373 00cc 3F689DE8 		ldmfd	sp, {r0, r1, r2, r3, r4, r5, fp, sp, lr}
 2374 00d0 04C09DE4 		ldmfd	sp!, {ip}
 2375 00d4 04F05EE2 		subs	pc, lr, #4
 2376              	.L7:
 2377              		.align	2
 2378              	.L6:
 2379 00d8 0C00E001 		.word	31457292
 2380 00dc 5400D201 		.word	30539860
 2381 00e0 00000000 		.word	button_id
 2382 00e4 00000000 		.word	button_flag
 2383 00e8 2400E001 		.word	31457316
 2384              		.cfi_endproc
 2385              	.LFE0:
 2387              		.align	2
 2388              		.global	Eint4567_init
 2390              	Eint4567_init:
 2391              	.LFB1:
  44:../button.c   **** 
  45:../button.c   **** void Eint4567_init(void)
  46:../button.c   **** {
 2392              		.loc 1 46 0
 2393              		.cfi_startproc
 2394              		@ Function supports interworking.
 2395              		@ args = 0, pretend = 0, frame = 0
 2396              		@ frame_needed = 1, uses_anonymous_args = 0
 2397 00ec 0DC0A0E1 		mov	ip, sp
 2398              	.LCFI2:
 2399              		.cfi_def_cfa_register 12
 2400 00f0 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2401 00f4 04B04CE2 		sub	fp, ip, #4
 2402              		.cfi_offset 14, -8
 2403              		.cfi_offset 13, -12
 2404              		.cfi_offset 11, -16
 2405              	.LCFI3:
 2406              		.cfi_def_cfa 11, 4
  47:../button.c   ****   // Configuración del controlador de interrupciones
  48:../button.c   ****   rI_ISPC = 0x3ffffff;        // Borra INTPND escribiendo 1s en I_ISPC
 2407              		.loc 1 48 0
 2408 00f8 A4309FE5 		ldr	r3, .L9
 2409 00fc 3F23E0E3 		mvn	r2, #-67108864
 2410 0100 002083E5 		str	r2, [r3, #0]
  49:../button.c   ****   rEXTINTPND = 0xf;           // Borra EXTINTPND escribiendo 1s en el propio registro
 2411              		.loc 1 49 0
 2412 0104 9C309FE5 		ldr	r3, .L9+4
 2413 0108 0F20A0E3 		mov	r2, #15
 2414 010c 002083E5 		str	r2, [r3, #0]
  50:../button.c   ****   rINTMOD = 0x0;              // Configura las líneas como de tipo IRQ
 2415              		.loc 1 50 0
 2416 0110 94309FE5 		ldr	r3, .L9+8
 2417 0114 0020A0E3 		mov	r2, #0
 2418 0118 002083E5 		str	r2, [r3, #0]
  51:../button.c   ****   rINTCON = 0x1;              // Habilita interrupciones vectorizadas y la línea IRQ (FIQ no)
 2419              		.loc 1 51 0
 2420 011c 1E36A0E3 		mov	r3, #31457280
 2421 0120 0120A0E3 		mov	r2, #1
 2422 0124 002083E5 		str	r2, [r3, #0]
  52:../button.c   ****   rINTMSK &= ~(BIT_EINT4567); // Habilitar interrupciones de EINT4567
 2423              		.loc 1 52 0
 2424 0128 80309FE5 		ldr	r3, .L9+12
 2425 012c 7C209FE5 		ldr	r2, .L9+12
 2426 0130 002092E5 		ldr	r2, [r2, #0]
 2427 0134 0226C2E3 		bic	r2, r2, #2097152
 2428 0138 002083E5 		str	r2, [r3, #0]
  53:../button.c   **** 
  54:../button.c   ****   // Establece la rutina de servicio para Eint4567
  55:../button.c   ****   pISR_EINT4567 = (unsigned)Eint4567_ISR;
 2429              		.loc 1 55 0
 2430 013c 70309FE5 		ldr	r3, .L9+16
 2431 0140 70209FE5 		ldr	r2, .L9+20
 2432 0144 002083E5 		str	r2, [r3, #0]
  56:../button.c   **** 
  57:../button.c   ****   // Configuración del puerto G
  58:../button.c   ****   rPCONG = 0xffff;                                                        // Establece la función 
 2433              		.loc 1 58 0
 2434 0148 6C309FE5 		ldr	r3, .L9+24
 2435 014c 6C209FE5 		ldr	r2, .L9+28
 2436 0150 002083E5 		str	r2, [r3, #0]
  59:../button.c   ****   rPUPG = 0x0;                                                            // Habilita el "pull-up" 
 2437              		.loc 1 59 0
 2438 0154 68309FE5 		ldr	r3, .L9+32
 2439 0158 0020A0E3 		mov	r2, #0
 2440 015c 002083E5 		str	r2, [r3, #0]
  60:../button.c   ****   rEXTINT = rEXTINT | (0x2 << 0) | (0x2 << 4) | (0x2 << 8) | (0x2 << 12); // Configura las líneas 
 2441              		.loc 1 60 0
 2442 0160 60209FE5 		ldr	r2, .L9+36
 2443 0164 5C309FE5 		ldr	r3, .L9+36
 2444 0168 003093E5 		ldr	r3, [r3, #0]
 2445 016c 223C83E3 		orr	r3, r3, #8704
 2446 0170 223083E3 		orr	r3, r3, #34
 2447 0174 003082E5 		str	r3, [r2, #0]
  61:../button.c   **** 
  62:../button.c   ****   rEXTINTPND = 0xf;        // borra los bits en EXTINTPND
 2448              		.loc 1 62 0
 2449 0178 28309FE5 		ldr	r3, .L9+4
 2450 017c 0F20A0E3 		mov	r2, #15
 2451 0180 002083E5 		str	r2, [r3, #0]
  63:../button.c   ****   rI_ISPC |= BIT_EINT4567; // borra el bit pendiente en INTPND
 2452              		.loc 1 63 0
 2453 0184 18309FE5 		ldr	r3, .L9
 2454 0188 14209FE5 		ldr	r2, .L9
 2455 018c 002092E5 		ldr	r2, [r2, #0]
 2456 0190 022682E3 		orr	r2, r2, #2097152
 2457 0194 002083E5 		str	r2, [r3, #0]
  64:../button.c   **** }
 2458              		.loc 1 64 0
 2459 0198 0CD04BE2 		sub	sp, fp, #12
 2460 019c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2461 01a0 1EFF2FE1 		bx	lr
 2462              	.L10:
 2463              		.align	2
 2464              	.L9:
 2465 01a4 2400E001 		.word	31457316
 2466 01a8 5400D201 		.word	30539860
 2467 01ac 0800E001 		.word	31457288
 2468 01b0 0C00E001 		.word	31457292
 2469 01b4 74FF7F0C 		.word	209715060
 2470 01b8 00000000 		.word	Eint4567_ISR
 2471 01bc 4000D201 		.word	30539840
 2472 01c0 FFFF0000 		.word	65535
 2473 01c4 4800D201 		.word	30539848
 2474 01c8 5000D201 		.word	30539856
 2475              		.cfi_endproc
 2476              	.LFE1:
 2478              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 button.c
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2266   .bss:00000000 led8_count
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2263   .bss:00000000 $d
                            *COM*:00000004 button_id
                            *COM*:00000004 last_timer_value
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2273   .bss:00000004 button_state
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2279   .bss:00000008 button_flag
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2282   .text:00000000 $a
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2285   .text:00000000 Eint4567_ISR
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2379   .text:000000d8 $d
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2387   .text:000000ec $a
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2390   .text:000000ec Eint4567_init
C:\Users\Jorge\AppData\Local\Temp\ccntVY8M.s:2465   .text:000001a4 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
timer1_leer
push_debug
